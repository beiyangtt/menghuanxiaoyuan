# 梦幻校园项目分析报告

## 一、项目概述

### 项目名称
**梦幻校园（Dream Campus）** - 基于北洋TT（RuoYi）框架的校园服务平台

### 项目定位
这是一个**校园综合服务平台**，为校园用户提供二手交易、跑腿服务、论坛交流、消息通知等功能。

### 技术架构
- **后端**：Spring Boot 2.5.15 + MyBatis + MySQL + Redis
- **前端**：UniApp（支持H5、小程序、APP多端）
- **框架基础**：RuoYi v3.9.0（北洋TT管理系统）

---

## 二、核心业务模块

### 1. 二手市场模块 ✅
- **功能**：商品发布、浏览、搜索、分类筛选
- **实体**：`DcSecondhandGoods`（商品）、`DcSecondhandCategory`（分类）
- **状态**：基本功能已完成

### 2. 跑腿服务模块 ✅
- **功能**：任务发布、接单、任务管理
- **实体**：`DcErrandTask`（跑腿任务）
- **状态**：基本功能已完成

### 3. 论坛模块 ✅
- **功能**：帖子发布、评论、点赞
- **实体**：`DcForumPost`（帖子）、`DcForumComment`（评论）、`DcForumLike`（点赞）
- **状态**：基本功能已完成

### 4. 消息模块 ✅
- **功能**：系统消息、评论通知、聊天功能
- **实体**：`DcMessage`（系统消息）、`DcChatMessage`（聊天消息）、`DcChatSession`（会话）
- **状态**：基本功能已完成

### 5. 用户系统 ✅
- **功能**：注册、登录、权限管理
- **状态**：已完成，支持管理员和普通用户区分

---


---

## 三、项目结构

### 后端结构（RuoYi-Vue-master）
```
ruoyi-admin/          # 管理后台模块
ruoyi-common/         # 公共模块
ruoyi-framework/      # 框架核心模块
ruoyi-system/         # 系统模块（包含业务实体）
  └── domain/         # 实体类
      ├── DcSecondhandGoods.java
      ├── DcErrandTask.java
      ├── DcForumPost.java
      └── ...
  └── service/        # 服务层
  └── mapper/         # 数据访问层
ruoyi-generator/      # 代码生成器
ruoyi-quartz/         # 定时任务
sql/                  # 数据库脚本
```

### 前端结构（RuoYi-App-master）
```
pages/                # 页面
  ├── index.vue       # 首页
  ├── secondhand/    # 二手市场
  ├── errand/         # 跑腿服务
  ├── forum/          # 论坛
  ├── message/        # 消息
  └── mine/           # 我的
api/                  # API接口
utils/                # 工具函数
  └── common.js       # 公共工具（时间、图片处理）
config.js             # 配置文件
```

---

## 四、数据库设计

### 核心表结构
1. **dc_secondhand_goods** - 二手商品表
2. **dc_secondhand_category** - 商品分类表
3. **dc_errand_task** - 跑腿任务表
4. **dc_forum_post** - 论坛帖子表
5. **dc_forum_comment** - 论坛评论表
6. **dc_forum_like** - 点赞表
7. **dc_message** - 系统消息表
8. **dc_chat_message** - 聊天消息表
9. **dc_chat_session** - 聊天会话表

### 数据库脚本位置
- `RuoYi-Vue-master/sql/03_dreamcampus.sql`

---

## 五、关键配置

### 后端配置
- **时区**：UTC（已统一配置）
- **时间格式**：ISO 8601（`yyyy-MM-dd'T'HH:mm:ss.SSS'Z'`）
- **图片路径**：`/profile/upload/...`
- **权限**：JWT认证，`/dreamcampus/**`允许匿名访问

### 前端配置
- **开发环境**：`http://localhost:8080`
- **生产环境**：`/prod-api`
- **图片处理**：自动添加`/profile`前缀，拼接`baseUrl`

---

## 六、安全配置

### 权限管理
- **管理员**：`userId = 1`的用户，拥有所有权限
- **普通用户**：只能操作自己发布的内容
- **匿名访问**：`/dreamcampus/**`接口允许匿名访问

### 安全措施
- ✅ JWT认证
- ✅ 密码加密存储
- ✅ XSS防护
- ✅ SQL注入防护
- ✅ 验证码功能

---

## 七、部署说明

### 后端部署
1. 执行数据库脚本：`sql/03_dreamcampus.sql`
2. 配置数据库连接：`application-prod.yml`
3. 配置Redis连接
4. 启动Spring Boot应用

### 前端部署
1. 安装依赖：`npm install`
2. 配置后端地址：`config.js`
3. 打包：`npm run build:h5`（H5）或`npm run build:mp-weixin`（小程序）

---



---

## 八、总结

### 项目状态
✅ **基本功能已完成**，可以正常运行

### 主要成就
1. ✅ 完成了四个核心业务模块（二手市场、跑腿服务、论坛、消息）
2. ✅ 修复了时间显示、图片持久化、跑腿发布等关键问题
3. ✅ 实现了用户注册、登录、权限管理
4. ✅ 前后端完整对接

### 需要关注的问题
1. ⚠️ 生产环境配置需要检查（日志级别、时区等）
2. ⚠️ 部分功能待完善（分页、收藏、订单等）
3. ⚠️ 代码质量需要提升（移除TODO、添加测试）

### 总体评价
这是一个**功能完整、架构清晰**的校园服务平台项目，基于成熟的RuoYi框架开发，代码结构良好。主要问题已经修复，可以投入使用。建议继续完善功能，提升用户体验。

---

**报告生成时间**：2025年11月
**项目版本**：v1.0.0
**状态**：✅ 可运行，待完善

