(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd9aa"],{"2d68":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:t.queryParams,size:"small",inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"任务标题",prop:"taskTitle"}},[a("el-input",{attrs:{placeholder:"请输入任务标题",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.taskTitle,callback:function(e){t.$set(t.queryParams,"taskTitle",e)},expression:"queryParams.taskTitle"}})],1),a("el-form-item",{attrs:{label:"任务状态",prop:"taskStatus"}},[a("el-select",{attrs:{placeholder:"任务状态",clearable:""},model:{value:t.queryParams.taskStatus,callback:function(e){t.$set(t.queryParams,"taskStatus",e)},expression:"queryParams.taskStatus"}},[a("el-option",{attrs:{label:"待接单",value:"0"}}),a("el-option",{attrs:{label:"进行中",value:"1"}}),a("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:t.multiple},on:{click:t.handleDelete}},[t._v("删除")])],1),a("right-toolbar",{attrs:{showSearch:t.showSearch},on:{"update:showSearch":function(e){t.showSearch=e},"update:show-search":function(e){t.showSearch=e},queryTable:t.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.taskList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"任务ID",align:"center",prop:"taskId",width:"80"}}),a("el-table-column",{attrs:{label:"任务标题",align:"center",prop:"taskTitle","show-overflow-tooltip":!0,"min-width":"200"}}),a("el-table-column",{attrs:{label:"任务类型",align:"center",prop:"taskType",width:"120"}}),a("el-table-column",{attrs:{label:"奖励",align:"center",prop:"taskReward",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#67c23a","font-weight":"bold"}},[t._v("¥"+t._s(e.row.taskReward))])]}}])}),a("el-table-column",{attrs:{label:"发布人",align:"center",prop:"nickName",width:"120"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"taskStatus",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.taskStatus?a("el-tag",{attrs:{type:"warning"}},[t._v("待接单")]):"1"===e.row.taskStatus?a("el-tag",{attrs:{type:"primary"}},[t._v("进行中")]):a("el-tag",{attrs:{type:"success"}},[t._v("已完成")])]}}])}),a("el-table-column",{attrs:{label:"浏览次数",align:"center",prop:"viewCount",width:"100"}}),a("el-table-column",{attrs:{label:"发布时间",align:"center",prop:"createTime",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return t.handleView(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{title:"任务详情",visible:t.detailOpen,width:"800px","append-to-body":""},on:{"update:visible":function(e){t.detailOpen=e}}},[t.taskDetail?a("el-descriptions",{attrs:{column:2,border:""}},[a("el-descriptions-item",{attrs:{label:"任务ID"}},[t._v(t._s(t.taskDetail.taskId))]),a("el-descriptions-item",{attrs:{label:"任务标题"}},[t._v(t._s(t.taskDetail.taskTitle))]),a("el-descriptions-item",{attrs:{label:"任务类型"}},[t._v(t._s(t.taskDetail.taskType))]),a("el-descriptions-item",{attrs:{label:"奖励"}},[t._v("¥"+t._s(t.taskDetail.taskReward))]),a("el-descriptions-item",{attrs:{label:"发布人"}},[t._v(t._s(t.taskDetail.nickName))]),a("el-descriptions-item",{attrs:{label:"状态"}},["0"===t.taskDetail.taskStatus?a("el-tag",{attrs:{type:"warning"}},[t._v("待接单")]):"1"===t.taskDetail.taskStatus?a("el-tag",{attrs:{type:"primary"}},[t._v("进行中")]):a("el-tag",{attrs:{type:"success"}},[t._v("已完成")])],1),a("el-descriptions-item",{attrs:{label:"起点"}},[t._v(t._s(t.taskDetail.startLocation))]),a("el-descriptions-item",{attrs:{label:"终点"}},[t._v(t._s(t.taskDetail.endLocation))]),a("el-descriptions-item",{attrs:{label:"任务描述",span:2}},[t._v(t._s(t.taskDetail.taskDesc))]),a("el-descriptions-item",{attrs:{label:"浏览次数"}},[t._v(t._s(t.taskDetail.viewCount))]),a("el-descriptions-item",{attrs:{label:"发布时间"}},[t._v(t._s(t.parseTime(t.taskDetail.createTime)))])],1):t._e()],1)],1)},s=[],i=(a("d81d"),a("d3b7"),a("0643"),a("a573"),a("b775"));function n(t){return Object(i["a"])({url:"/dreamcampus/errand/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/dreamcampus/errand/"+t,method:"delete"})}function o(t){return Object(i["a"])({url:"/dreamcampus/errand/"+t,method:"get"})}var c={name:"ErrandTask",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,taskList:[],title:"",detailOpen:!1,taskDetail:null,queryParams:{pageNum:1,pageSize:10,taskTitle:null,taskStatus:null}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,n(this.queryParams).then((function(e){t.taskList=e.rows,t.total=e.total,t.loading=!1}))},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.taskId})),this.single=1!=t.length,this.multiple=!t.length},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleView:function(t){var e=this;o(t.taskId).then((function(t){e.taskDetail=t.data,e.detailOpen=!0}))},handleDelete:function(t){var e=this,a=t.taskId||this.ids;this.$modal.confirm('是否确认删除任务编号为"'+a+'"的数据项？').then((function(){return r(a)})).then((function(){e.getList(),e.$modal.msgSuccess("删除成功")})).catch((function(){}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,l,s,!1,null,"0a2e9291",null);e["default"]=p.exports}}]);