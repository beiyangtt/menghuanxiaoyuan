(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-errand-index"],{"40e2":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".container[data-v-478643d8]{background-color:#f5f5f5;min-height:100vh;padding-bottom:%?100?%}.search-bar[data-v-478643d8]{background-color:#fff;padding:%?20?%}.service-types[data-v-478643d8]{display:flex;flex-direction:row;background-color:#fff;padding:%?30?% %?20?%;justify-content:space-around}.type-item[data-v-478643d8]{display:flex;flex-direction:column;align-items:center}.type-item.active .type-text[data-v-478643d8]{color:#409eff}.type-text[data-v-478643d8]{font-size:%?24?%;color:#666;margin-top:%?10?%}.task-list[data-v-478643d8]{padding:%?20?%}.task-item[data-v-478643d8]{background-color:#fff;border-radius:%?20?%;margin-bottom:%?20?%;padding:%?30?%;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.1)}.loading-text[data-v-478643d8], .empty-text[data-v-478643d8]{text-align:center;padding:%?100?% 0;color:#999;font-size:%?28?%}.task-header[data-v-478643d8]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?20?%;flex-wrap:wrap}.task-title[data-v-478643d8]{font-size:%?32?%;color:#333;font-weight:700;flex:1;margin-right:%?20?%}.task-reward-wrapper[data-v-478643d8]{display:flex;align-items:center;flex-shrink:0}.task-reward[data-v-478643d8]{font-size:%?36?%;color:#f56c6c;font-weight:700;margin-right:%?20?%}.completed-badge[data-v-478643d8]{width:%?140?%;height:%?140?%;background-color:#e5e5e5;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.completed-text[data-v-478643d8]{color:#f56c6c;font-size:%?28?%;font-weight:700;-webkit-transform:rotate(-8deg);transform:rotate(-8deg);letter-spacing:%?2?%}.task-content[data-v-478643d8]{margin-bottom:%?20?%}.task-info[data-v-478643d8]{display:flex;flex-direction:row;margin-bottom:%?10?%;font-size:%?28?%}.info-label[data-v-478643d8]{color:#999;width:%?100?%}.info-value[data-v-478643d8]{color:#333;flex:1}.task-footer[data-v-478643d8]{display:flex;justify-content:space-between;align-items:center;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}.task-time[data-v-478643d8]{font-size:%?24?%;color:#999}.task-status[data-v-478643d8]{font-size:%?24?%;padding:%?5?% %?15?%;border-radius:%?20?%;background-color:#f0f0f0;color:#666}.task-status.pending[data-v-478643d8]{background-color:#ecf5ff;color:#409eff}.task-status.accepted[data-v-478643d8]{background-color:#f0f9ff;color:#67c23a}.task-status.completed[data-v-478643d8]{background-color:#f0f0f0;color:#999}.task-status.cancelled[data-v-478643d8]{background-color:#f0f0f0;color:#999}.fab-button[data-v-478643d8]{position:fixed;right:%?40?%;bottom:%?120?%;width:%?100?%;height:%?100?%;border-radius:50%;background-color:#67c23a;display:flex;align-items:center;justify-content:center;box-shadow:0 %?4?% %?12?% rgba(103,194,58,.4);z-index:999}",""]),t.exports=e},"43b8":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c");var i=n(a("2634")),s=n(a("2fdc")),r=a("49d0"),o=a("d0b6"),d={data:function(){return{currentType:0,searchKeyword:"",loading:!1,serviceTypes:[{id:0,name:"全部",icon:"grid"},{id:1,name:"代取",icon:"paperplane"},{id:2,name:"代买",icon:"cart"},{id:3,name:"代送",icon:"location"},{id:4,name:"其他",icon:"more"}],taskList:[],hasEntered:!1}},onLoad:function(){this.loadTaskList()},onShow:function(){this.hasEntered?this.loadTaskList():this.hasEntered=!0},onPullDownRefresh:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.loadTaskList();case 3:return e.prev=3,uni.stopPullDownRefresh(),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})))()},methods:{loadTaskList:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var a,n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,a={},t.currentType,t.searchKeyword&&(a.taskTitle=t.searchKeyword),e.next=7,(0,r.getTaskList)(a);case 7:n=e.sent,200===n.code?t.taskList=(n.rows||[]).map((function(e){return{id:e.taskId,title:e.taskTitle,reward:e.taskReward||e.reward||0,start:e.startLocation||"",end:e.endLocation||"",time:e.deadline?t.formatTime(e.deadline):e.timeRequirement||"",publishTime:t.formatTime(e.createTime),status:e.taskStatus||"0"}})):uni.showToast({title:n.msg||"加载失败",icon:"none"}),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),console.error("加载任务列表失败:",e.t0),uni.showToast({title:"加载失败，请重试",icon:"none"});case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},handleSearch:function(t){this.searchKeyword=t.value||"",this.loadTaskList()},handleClearSearch:function(){this.searchKeyword="",this.loadTaskList()},switchType:function(t){this.currentType=t,this.loadTaskList()},getStatusText:function(t){return{0:"待接单",1:"进行中",2:"已完成",3:"已取消"}[t]||"未知"},getStatusClass:function(t){return{0:"pending",1:"accepted",2:"completed",3:"cancelled"}[t]||""},navigateToDetail:function(t,e){uni.navigateTo({url:"/pages/errand/detail?id=".concat(t)})},navigateToPublish:function(){uni.navigateTo({url:"/pages/errand/publish"})},formatTime:function(t){return(0,o.formatRelativeTime)(t)}}};e.default=d},4995:function(t,e,a){var n=a("40e2");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("508f434c",n,!0,{sourceMap:!1,shadowMode:!1})},"49d0":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.acceptTask=function(t){return(0,i.default)({url:"/dreamcampus/errand/accept/"+t,method:"put"})},e.addTask=function(t){return(0,i.default)({url:"/dreamcampus/errand",method:"post",data:t})},e.completeTask=function(t){return(0,i.default)({url:"/dreamcampus/errand/complete/"+t,method:"put"})},e.deleteTask=function(t){return(0,i.default)({url:"/dreamcampus/errand/"+t,method:"delete"})},e.getHotTasks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(0,i.default)({url:"/dreamcampus/errand/hot",method:"get",params:{limit:t}})},e.getTaskDetail=function(t){return(0,i.default)({url:"/dreamcampus/errand/"+t,method:"get"})},e.getTaskList=function(t){return(0,i.default)({url:"/dreamcampus/errand/list",method:"get",params:t})},e.updateTask=function(t){return(0,i.default)({url:"/dreamcampus/errand",method:"put",data:t})};var i=n(a("4fad"))},"77d8":function(t,e,a){"use strict";var n=a("4995"),i=a.n(n);i.a},"80b5":function(t,e,a){"use strict";a.r(e);var n=a("43b8"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},c677:function(t,e,a){"use strict";a.r(e);var n=a("dd8e"),i=a("80b5");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("77d8");var r=a("828b"),o=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"478643d8",null,!1,n["a"],void 0);e["default"]=o.exports},dd8e:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var n={uniSearchBar:a("0293").default,uniIcons:a("b1c9").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"search-bar"},[a("uni-search-bar",{attrs:{placeholder:"搜索跑腿服务...",clearButton:"auto"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSearch.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClearSearch.apply(void 0,arguments)}},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),a("v-uni-view",{staticClass:"service-types"},t._l(t.serviceTypes,(function(e){return a("v-uni-view",{key:e.id,staticClass:"type-item",class:{active:t.currentType===e.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.switchType(e.id)}}},[a("uni-icons",{attrs:{type:e.icon,size:"30",color:t.currentType===e.id?"#409EFF":"#666"}}),a("v-uni-text",{staticClass:"type-text"},[t._v(t._s(e.name))])],1)})),1),a("v-uni-view",{staticClass:"task-list"},[t.loading?a("v-uni-view",{staticClass:"loading-text"},[t._v("加载中...")]):0===t.taskList.length?a("v-uni-view",{staticClass:"empty-text"},[t._v("暂无任务")]):t._l(t.taskList,(function(e){return a("v-uni-view",{key:e.id,staticClass:"task-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navigateToDetail(e.id,e.status)}}},[a("v-uni-view",{staticClass:"task-header"},[a("v-uni-text",{staticClass:"task-title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"task-reward-wrapper"},[a("v-uni-text",{staticClass:"task-reward"},[t._v("¥"+t._s(e.reward))]),"2"===e.status?a("v-uni-view",{staticClass:"completed-badge"},[a("v-uni-text",{staticClass:"completed-text"},[t._v("已完成")])],1):t._e()],1)],1),a("v-uni-view",{staticClass:"task-content"},[a("v-uni-view",{staticClass:"task-info"},[a("v-uni-text",{staticClass:"info-label"},[t._v("起点：")]),a("v-uni-text",{staticClass:"info-value"},[t._v(t._s(e.start))])],1),a("v-uni-view",{staticClass:"task-info"},[a("v-uni-text",{staticClass:"info-label"},[t._v("终点：")]),a("v-uni-text",{staticClass:"info-value"},[t._v(t._s(e.end))])],1),a("v-uni-view",{staticClass:"task-info"},[a("v-uni-text",{staticClass:"info-label"},[t._v("时间：")]),a("v-uni-text",{staticClass:"info-value"},[t._v(t._s(e.time))])],1)],1),a("v-uni-view",{staticClass:"task-footer"},[a("v-uni-text",{staticClass:"task-time"},[t._v(t._s(e.publishTime))]),a("v-uni-text",{staticClass:"task-status",class:t.getStatusClass(e.status)},[t._v(t._s(t.getStatusText(e.status)))])],1)],1)}))],2),a("v-uni-view",{staticClass:"fab-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navigateToPublish.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"plus",size:"30",color:"#fff"}})],1)],1)},s=[]}}]);